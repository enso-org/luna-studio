@import '_variables';

/////////////////////////////
//        utilities        //
/////////////////////////////

.luna-blur {
    //backdrop-filter: blur(0);
    background: rgba(255,255,255,0);
    position:   absolute;
    z-index:   -1;
    top:        0;
    left:       0;
    height:     100%;
    width:      100%;
}

/////////////////////////////
//          nodes          //
/////////////////////////////

.luna-node {
    position: absolute;
    width:    0;
    height:   0;
}

.luna-node__text {
    top:    inherit !important;
    bottom: 36rem !important;
}

.luna-node__name {
    fill:        @colorName;
    text-anchor: middle;
    font-weight: 300;
    filter:      "url(#textShadow)";
    &::selection {
        background: none;
    }
}

.luna-node__name--expression {
    fill:        lightgreen;
    font-size:   12px;
    line-height: 16px;
}

.luna-node__returned-value {
    white-space:     nowrap;
    display:         flex;
    justify-content: center;
    color:           #888;
    font-size:       10rem;
    line-height:     16rem;
    position:        relative;
    top:            -8rem;
}

.luna-port {
    stroke-width: 0;
    &.luna-hover {
        .luna-port__shape {
            fill: #fff !important;
        }
    }
}
.luna-port--self .luna-port__select {
    r: 10;
}

.luna-port__select {
    opacity: 0;
}

.luna-port--invisible {
    circle {
        r: 0 !important;
    }
}

.luna-port--i--phantom {
    display: none;
}



// types

.luna-port__type {
    font-size:   10px;
    line-height: 16px;
    display:     none;
    fill:        #888;
    text-anchor: end;
}

.luna-port--o,
.luna-port--o--single {
    .luna-port__type {
        text-anchor: start;
    }
}

.luna-node:hover .luna-port__type { display: inherit }
.luna-port:hover .luna-port__type { fill: #fff }

/////////////////////////////
//      node expanded      //
/////////////////////////////

.luna-node--expanded {
    z-index: 10000;
    .luna-node__vizzs {
        left: 0;
        top: -8px;
    }
    .luna-port {
        position: relative;
    }
    .luna-port--o {
        .luna-port__shape,
        .luna-port__select {
            cx: @expandedNodeWidthPx;
        }
        .luna-port__type {
            text-anchor: start;
        }
    }
    .luna-node__body {
        height: auto;
        width:  @expandedNodeWidth;
        left:   0;
    }
    .luna-blur {
        //backdrop-filter: blur(12px);
        //background:      rgba(40,40,40,.5);
        background:    #222;
        border-radius: @borderRadius;
        box-shadow:    0 0 10px @colorBackground;
    }
    .luna-node__properties-crop {
        max-height: 110rem;
        max-width:  @expandedNodeWidth;
    }
    .luna-node__properties {
        height:        auto;
        width:         @expandedNodeWidth - 2 * @expandedNodePadding;
        opacity:       1;
        border-radius: @borderRadius;
        left:          0;
        padding:      ~"calc(12px * var(--scale)) calc(12px * var(--scale)) calc(8px * var(--scale))";
    }
    .luna-selection {
        border-radius: 1px;
    }
}

.luna-node__body {
    width:    40rem;
    height:   40rem;
    position: relative;
    top:     -20rem;
    left:    -20rem;
}

.luna-node__properties-crop {
    max-width:  40rem;
    max-height: 40rem;
    overflow:   hidden;
}

.luna-node__properties-crop textarea {

}

.luna-node__properties *,
.luna-node__vizzs * {
    font-size: ~"calc(10px * var(--scale))";
}

.luna-node__properties {
    color:         @colorTextUneditable;
    line-height:   ~"calc(16px * var(--scale))";
    width:         40rem;
    height:        40rem;
    opacity:       1;
    position:      relative;
    left:          0;
    border-radius: 20rem;
    overflow:      hidden;
    .luna-blur {
        border-radius: 20rem;
    }
    .luna-row {
        display:         flex;
        justify-content: space-between;
        position:        relative;
        width:           @expandedNodeWidth - 2 * @expandedNodePadding;
    }
    .luna-row--first {
        height:          16rem;
        justify-content: flex-end;
    }
}

.luna-node__vizzs {
    position: relative;
    left:    -30px;
    top:     -16px;
    width:    @expandedNodeWidth;
    table {
        border:          0;
        width:           100%;
        text-align:      left;
        border-collapse: collapse;
    }
    td, th {
        line-height: 20px;
        padding:     0 12px;
    }
    th {
        border-bottom: 2px solid rgba(255,255,255,.02);
    }
    tr {
        &:nth-child(even) {
            background: rgba(255,255,255,.0)
        }
    }
}

.luna-vis {
    position: relative;
    width:    @expandedNodeWidth;
    height:   @expandedNodeWidth - 2 * @expandedNodePadding;
    overflow: hidden;
    .luna-scroll {
        overflow: scroll;
        height:   100%;
    }
}

.luna-vis--graph {
    position: relative;
    svg {
        position: relative;
        top:      15px;
        left:    -5px;
        fill:     #666;
        overflow: initial;
    }
}

/////////////////////////////
//          monad          //
/////////////////////////////

.luna-plane--monads {
    opacity: .15;
}

.luna-monad {
    stroke-width:    28px;
    fill:            none;
    stroke-linejoin: round;
}

// controls

.luna-ctrl-switch {
    cursor:        pointer;
    height:        8rem;
    width:         16rem;
    background:    #111;
    border-radius: 1000px;
    position:      relative;
    top:           4rem;
    display:       flex;
    &::after {
        top:          -2rem;
        position:      relative;
        display:       block;
        content:       " ";
        width:         12rem;
        height:        12rem;
        background:    #777;
        border-radius: 1000px;
    }
}
.luna-ctrl-switch--on {
    background: #888;
    &::after {
        background: #bbb;
        left:       6rem;
    }
}
.luna-ctrl-switch--off {
    background: #3a3a3a;
    &::after {
        background: #666;
        left:      -2rem;
    }
}

/////////////////////////////
//          icons          //
/////////////////////////////

.luna-node__icons {
    display: none;
}
.luna-icon--show {
    x:     -5px;
    y:     -100px;
    width:  10px;
    height: 10px;
    fill:   red;
}
